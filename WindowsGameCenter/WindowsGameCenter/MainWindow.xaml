<?xml version="1.0" encoding="utf-8"?>
<local:CustomWindow
    x:Class="WindowsGameCenter.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:WindowsGameCenter"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Title="WindowsGameCenter">
    <Window.SystemBackdrop>
        <MicaBackdrop Kind="BaseAlt"/>
    </Window.SystemBackdrop>

    <Grid>
        <!-- Windows 11 Wave Background -->
        <Image Source="ms-appx:///Assets/wave-bg.png" 
               Stretch="UniformToFill" 
               Opacity="0.6"/>

        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="48"/>
                <!-- Minimal Sidebar -->
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Minimal Sidebar -->
            <NavigationView
                PaneDisplayMode="LeftMinimal"
                IsPaneToggleButtonVisible="False"
                IsBackButtonVisible="Collapsed"
                IsSettingsVisible="False"
                IsPaneOpen="False"
                OpenPaneLength="48"
                CompactPaneLength="48"
                Background="{ThemeResource SystemControlBackgroundAltHighBrush}"
                BorderBrush="{ThemeResource SystemControlBackgroundListLowBrush}"
                BorderThickness="0,0,1,0">

                <NavigationView.MenuItems>
                    <NavigationViewItem Icon="Home" IsSelected="True"/>
                    <NavigationViewItem>
                        <NavigationViewItem.Icon>
                            <FontIcon Glyph="&#xE7FC;"/>
                            <!-- Movies -->
                        </NavigationViewItem.Icon>
                    </NavigationViewItem>
                    <NavigationViewItem>
                        <NavigationViewItem.Icon>
                            <FontIcon Glyph="&#xE8D6;"/>
                            <!-- Music -->
                        </NavigationViewItem.Icon>
                    </NavigationViewItem>
                    <NavigationViewItem>
                        <NavigationViewItem.Icon>
                            <FontIcon Glyph="&#xE7C3;"/>
                            <!-- Games -->
                        </NavigationViewItem.Icon>
                    </NavigationViewItem>
                </NavigationView.MenuItems>

                <NavigationView.FooterMenuItems>
                    <NavigationViewItem Icon="Setting"/>
                    <NavigationViewItem>
                        <NavigationViewItem.Icon>
                            <FontIcon Glyph="&#xE7E8;"/>
                            <!-- Power -->
                        </NavigationViewItem.Icon>
                    </NavigationViewItem>
                </NavigationView.FooterMenuItems>
            </NavigationView>

            <!-- Main Content -->
            <Grid Grid.Column="1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="48"/>
                    <!-- Header -->
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Custom Titlebar -->
                <Grid x:Name="AppTitleBar" 
                      Height="48"
                      Margin="0,0,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Orientation="Horizontal" 
                              Margin="12,0,0,0"
                              Spacing="12">
                        <Image Source="ms-appx:///Assets/WindowsGameCenter.png"
                               Height="24" Width="24"/>
                        <TextBlock Text="Windows Game Center"
                                 VerticalAlignment="Center"
                                 Style="{StaticResource CaptionTextBlockStyle}"/>
                    </StackPanel>

                    <StackPanel Grid.Column="2" 
                              Orientation="Horizontal" 
                              Margin="0,0,12,0"
                              Spacing="24">
                        <FontIcon Glyph="&#xE721;"/>
                        <!-- Search -->
                        <FontIcon Glyph="&#xE701;"/>
                        <!-- WiFi -->
                        <FontIcon Glyph="&#xE767;"/>
                        <!-- Volume -->
                        <TextBlock Text="11:00 AM" 
                                 VerticalAlignment="Center"/>
                    </StackPanel>
                </Grid>

                <!-- Scrollable Content -->
                <ScrollViewer Grid.Row="1" Padding="24,0,24,24">
                    <StackPanel Spacing="32">
                        <!-- Recommended Section -->
                        <StackPanel>
                            <TextBlock Text="Recommended" 
                                     Style="{StaticResource TitleLargeTextBlockStyle}"
                                     Margin="0,0,0,16"/>

                            <ScrollViewer HorizontalScrollMode="Auto" 
                                        HorizontalScrollBarVisibility="Auto">
                                <ItemsRepeater ItemsSource="{x:Bind RecommendedGames}">
                                    <ItemsRepeater.Layout>
                                        <StackLayout Orientation="Horizontal" Spacing="16"/>
                                    </ItemsRepeater.Layout>
                                    <ItemsRepeater.ItemTemplate>
                                        <DataTemplate>
                                            <Grid Width="400" Height="225"
                                                  CornerRadius="8"
                                                  BorderThickness="1"
                                                  BorderBrush="{ThemeResource SystemControlBackgroundListLowBrush}">
                                                <Grid.Background>
                                                    <ImageBrush ImageSource="{Binding ImageUrl}" Stretch="UniformToFill"/>
                                                </Grid.Background>
                                                <Grid VerticalAlignment="Bottom">
                                                    <Grid.Background>
                                                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                                            <GradientStop Offset="0" Color="Transparent"/>
                                                            <GradientStop Offset="1" Color="#CC000000"/>
                                                        </LinearGradientBrush>
                                                    </Grid.Background>
                                                    <StackPanel Margin="16,48,16,16" Spacing="4">
                                                        <TextBlock Text="{Binding Title}"
                                                                 Style="{StaticResource SubtitleTextBlockStyle}"/>
                                                        <TextBlock Text="{Binding Subtitle}"
                                                                 Style="{StaticResource CaptionTextBlockStyle}"
                                                                 Opacity="0.7"/>
                                                    </StackPanel>
                                                </Grid>
                                            </Grid>
                                        </DataTemplate>
                                    </ItemsRepeater.ItemTemplate>
                                </ItemsRepeater>
                            </ScrollViewer>
                        </StackPanel>

                        <!-- Explore Section -->
                        <StackPanel>
                            <TextBlock Text="Explore" 
                                     Style="{StaticResource TitleLargeTextBlockStyle}"
                                     Margin="0,0,0,16"/>

                            <GridView ItemsSource="{x:Bind ExploreGames}"
                                    SelectionMode="None"
                                    IsItemClickEnabled="True"
                                    Padding="0">
                                <GridView.ItemTemplate>
                                    <DataTemplate>
                                        <Grid Width="300" Height="169"
                                              CornerRadius="8"
                                              BorderThickness="1"
                                              BorderBrush="{ThemeResource SystemControlBackgroundListLowBrush}">
                                            <Grid.Background>
                                                <ImageBrush ImageSource="{Binding ImageUrl}" Stretch="UniformToFill"/>
                                            </Grid.Background>
                                            <Grid VerticalAlignment="Bottom">
                                                <Grid.Background>
                                                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                                        <GradientStop Offset="0" Color="Transparent"/>
                                                        <GradientStop Offset="1" Color="#CC000000"/>
                                                    </LinearGradientBrush>
                                                </Grid.Background>
                                                <TextBlock Text="{Binding Title}"
                                                         Margin="16"
                                                         Style="{StaticResource BodyStrongTextBlockStyle}"/>
                                            </Grid>
                                        </Grid>
                                    </DataTemplate>
                                </GridView.ItemTemplate>
                                <GridView.ItemContainerStyle>
                                    <Style TargetType="GridViewItem">
                                        <Setter Property="Margin" Value="0,0,16,16"/>
                                        <Setter Property="Padding" Value="0"/>
                                    </Style>
                                </GridView.ItemContainerStyle>
                            </GridView>
                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>
            </Grid>
        </Grid>
    </Grid>
</local:CustomWindow>
