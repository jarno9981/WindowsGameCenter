<UserControl
    x:Class="GameCenter.Helpers.GameDetailsControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:GameCenter.Helpers"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <UserControl.Resources>
        <!-- Modern card style with shadow and rounded corners -->
        <Style x:Key="ModernCardStyle" TargetType="Grid">
            <Setter Property="Background" Value="{ThemeResource CardBackgroundFillColorDefaultBrush}"/>
            <Setter Property="BorderBrush" Value="{ThemeResource CardStrokeColorDefaultBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="Margin" Value="8"/>
        </Style>

        <!-- Play button style -->
        <Style x:Key="PlayButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#4CAF50"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="CornerRadius" Value="20"/>
            <Setter Property="Padding" Value="16,8"/>
            <Setter Property="HorizontalAlignment" Value="Right"/>
            <Setter Property="VerticalAlignment" Value="Bottom"/>
            <Setter Property="Margin" Value="0,0,16,16"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
        </Style>

        <!-- Info button style -->
        <Style x:Key="InfoButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="{ThemeResource SubtleFillColorTransparentBrush}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="CornerRadius" Value="20"/>
            <Setter Property="Padding" Value="8"/>
            <Setter Property="HorizontalAlignment" Value="Right"/>
            <Setter Property="VerticalAlignment" Value="Top"/>
            <Setter Property="Margin" Value="0,16,16,0"/>
            <Setter Property="Width" Value="32"/>
            <Setter Property="Height" Value="32"/>
        </Style>

        <!-- Game info text style -->
        <Style x:Key="GameInfoTextStyle" TargetType="TextBlock">
            <Setter Property="Foreground" Value="{ThemeResource TextFillColorPrimaryBrush}"/>
            <Setter Property="Margin" Value="0,4,0,0"/>
            <Setter Property="TextWrapping" Value="Wrap"/>
        </Style>

        <!-- Game title style -->
        <Style x:Key="GameTitleStyle" TargetType="TextBlock">
            <Setter Property="Foreground" Value="{ThemeResource TextFillColorPrimaryBrush}"/>
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="TextWrapping" Value="Wrap"/>
            <Setter Property="MaxLines" Value="2"/>
            <Setter Property="TextTrimming" Value="CharacterEllipsis"/>
        </Style>

        <!-- Game subtitle style -->
        <Style x:Key="GameSubtitleStyle" TargetType="TextBlock">
            <Setter Property="Foreground" Value="{ThemeResource TextFillColorSecondaryBrush}"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Margin" Value="0,4,0,0"/>
        </Style>

        <!-- Game detail item style -->
        <Style x:Key="GameDetailItemStyle" TargetType="StackPanel">
            <Setter Property="Margin" Value="0,8,0,0"/>
        </Style>

        <!-- Game detail label style -->
        <Style x:Key="GameDetailLabelStyle" TargetType="TextBlock">
            <Setter Property="Foreground" Value="{ThemeResource TextFillColorSecondaryBrush}"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
        </Style>

        <!-- Game detail value style -->
        <Style x:Key="GameDetailValueStyle" TargetType="TextBlock">
            <Setter Property="Foreground" Value="{ThemeResource TextFillColorPrimaryBrush}"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="TextWrapping" Value="Wrap"/>
        </Style>
        <Storyboard x:Name="ExpandStoryboard">
            <DoubleAnimation Storyboard.TargetName="ExpandedContent" 
                             Storyboard.TargetProperty="Opacity"
                             From="0" To="1" Duration="0:0:0.2"/>
            <DoubleAnimation Storyboard.TargetName="CardTransform" 
                             Storyboard.TargetProperty="ScaleX"
                             From="1" To="1.05" Duration="0:0:0.2"/>
            <DoubleAnimation Storyboard.TargetName="CardTransform" 
                             Storyboard.TargetProperty="ScaleY"
                             From="1" To="1.05" Duration="0:0:0.2"/>
        </Storyboard>
        <Storyboard x:Name="CollapseStoryboard">
            <DoubleAnimation Storyboard.TargetName="ExpandedContent" 
                             Storyboard.TargetProperty="Opacity"
                             From="1" To="0" Duration="0:0:0.2"/>
            <DoubleAnimation Storyboard.TargetName="CardTransform" 
                             Storyboard.TargetProperty="ScaleX"
                             From="1.05" To="1" Duration="0:0:0.2"/>
            <DoubleAnimation Storyboard.TargetName="CardTransform" 
                             Storyboard.TargetProperty="ScaleY"
                             From="1.05" To="1" Duration="0:0:0.2"/>
        </Storyboard>
    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Game Card with Shadow and Rounded Corners -->
        <Grid Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" 
              BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" 
              BorderThickness="1" CornerRadius="8" Margin="4">
            <Grid.Shadow>
                <ThemeShadow />
            </Grid.Shadow>

            <!-- Game Image -->
            <Grid>
                <Image x:Name="GameImage" Stretch="UniformToFill" 
                       HorizontalAlignment="Center" VerticalAlignment="Center"/>

                <!-- Gradient overlay for better text readability -->
                <Rectangle VerticalAlignment="Bottom" Height="80">
                    <Rectangle.Fill>
                        <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
                            <GradientStop Color="Transparent" Offset="0.0"/>
                            <GradientStop Color="#99000000" Offset="1.0"/>
                        </LinearGradientBrush>
                    </Rectangle.Fill>
                </Rectangle>

                <!-- Game Title -->
                <StackPanel VerticalAlignment="Bottom" Margin="12,0,12,12">
                    <TextBlock Text="{x:Bind Game.Name, Mode=OneWay}" 
                               Foreground="White" FontSize="16" FontWeight="SemiBold"
                               TextWrapping="Wrap" MaxLines="2" TextTrimming="CharacterEllipsis"/>

                    <StackPanel Orientation="Horizontal" Spacing="8" Margin="0,4,0,0">
                        <!-- Launcher -->
                        <TextBlock Text="{x:Bind Game.Launcher, Mode=OneWay}" 
                                   Foreground="White" FontSize="12" Opacity="0.8"/>

                        <!-- Developer (if available) -->
                        <TextBlock x:Name="DeveloperText" Text="{x:Bind Game.Developer, Mode=OneWay}" 
                                   Foreground="White" FontSize="12" Opacity="0.8"
                                   Visibility="Collapsed"/>
                    </StackPanel>

                    <!-- Last Played -->
                    <TextBlock x:Name="LastPlayedText" Foreground="White" 
                               FontSize="12" Opacity="0.7" Margin="0,4,0,0"/>
                </StackPanel>

                <!-- Play Button (hidden by default, shown on hover) -->
                <Button x:Name="PlayButton" Content="Play" 
                        Background="#4CAF50" Foreground="White"
                        BorderThickness="0" CornerRadius="20" Padding="16,8"
                        HorizontalAlignment="Right" VerticalAlignment="Bottom"
                        Margin="0,0,12,12" Opacity="0"
                        Click="PlayButton_Click"
                        PointerEntered="PlayButton_PointerEntered"
                        PointerExited="PlayButton_PointerExited"/>

                <!-- Info Button -->
                <Button x:Name="InfoButton" 
                        Background="#33FFFFFF" Foreground="White"
                        BorderThickness="0" CornerRadius="20" Padding="8"
                        HorizontalAlignment="Right" VerticalAlignment="Top"
                        Margin="0,12,12,0" Width="32" Height="32"
                        Click="InfoButton_Click">
                    <FontIcon FontFamily="Segoe MDL2 Assets" Glyph="&#xE946;" FontSize="14"/>
                </Button>
            </Grid>
        </Grid>
    </Grid>
</UserControl>